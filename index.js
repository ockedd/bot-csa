const { Telegraf, Markup, HTML, Scenes, session } = require('telegraf')
const { bottoken } = require("./config/config");
const { channelid } = require("./config/config");
const { adminid } = require("./config/config");
const bot = new Telegraf(bottoken)
const { ref, get, child, set, update } = require("firebase/database");
const db = require("./bd.js");
const fs = require('fs');
const addFilmScene = require('./scenes/addfilm');
const scene = require("./scenes/addfilm");
const stage = new Scenes.Stage([ addFilmScene ])
bot.use(session());
bot.use(stage.middleware());
const checkMember = async (chatId, memberId) => {
    const info = await bot.telegram.getChatMember(chatId, memberId);
    if(info.status == "left") return false;
    return true;   
}

bot.command('start', async (ctx) => {
    let value = await get(child(ref(db), "users/" + ctx.chat.id))
    value = value.val();
    if(ctx.chat.username == undefined) {
        await update(child(ref(db), "users/" + ctx.chat.id), {"username": 'undefined'})
       try { await ctx.replyWithHTML('<b>üé¨–ü—Ä–∏–≤–µ—Ç –ª—é–±–∏—Ç–µ–ª—å –∫–∏–Ω–æ! –ü—Ä–µ–∂–¥–µ —á–µ–º –Ω–∞—á–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–∞—à–∏–º –±–æ—Ç–æ–º, –ø–æ–¥–ø–∏—à–∏—Å—å: </b>' + '\n\n<a href="https://t.me/+bc9MOZxFDH0yNjEy">FilmClips</a>' + '\n\n<i>–ü–æ—Å–ª–µ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É‚úÖ"</i>',
        Markup.inlineKeyboard([
            [Markup.button.callback('–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É‚úÖ','podpiska')]
        ])
        )
    } catch {

    }
        return
    } if(value == null) { 
        await update(child(ref(db), "users/" + ctx.chat.id), {"username": ctx.chat.username})
    }
   try { await ctx.replyWithHTML('<b>üé¨–ü—Ä–∏–≤–µ—Ç –ª—é–±–∏—Ç–µ–ª—å –∫–∏–Ω–æ! –ü—Ä–µ–∂–¥–µ —á–µ–º –Ω–∞—á–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–∞—à–∏–º –±–æ—Ç–æ–º, –ø–æ–¥–ø–∏—à–∏—Å—å: </b>' + '\n\n<a href="https://t.me/+bc9MOZxFDH0yNjEy">FilmClips</a>' + '\n\n<i>–ü–æ—Å–ª–µ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É‚úÖ"</i>',
    Markup.inlineKeyboard([
        [Markup.button.callback('–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É‚úÖ','podpiska')]
    ])
    )
} catch {

}
})
bot.action("podpiska", async (ctx) => {
    const checked = await checkMember(channelid, ctx.chat.id)
    if(!checked) return ctx.editMessageText("‚ùå–¢–´ –ù–ï –ü–û–î–ü–ò–°–ê–õ–°–Ø –ù–ê –ö–ê–ù–ê–õ‚ùå");
    ctx.replyWithHTML('<b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å ' + ctx.from.first_name + '</b>!\n\n<i>–î–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –æ—Ç–∫—Ä—ã—Ç\n\n–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É </i><b>üîé –ù–∞–π—Ç–∏ —Ñ–∏–ª—å–º</b>',
    Markup.keyboard([
        ['üîé –ù–∞–π—Ç–∏ —Ñ–∏–ª—å–º']
    ]).resize()
    )
})
bot.hears('üîé –ù–∞–π—Ç–∏ —Ñ–∏–ª—å–º', async (ctx) => {
    const checked2 = await checkMember(channelid, ctx.chat.id)
    if(!checked2) 
    return ctx.replyWithHTML('<b>üé¨–ü—Ä–∏–≤–µ—Ç –ª—é–±–∏—Ç–µ–ª—å –∫–∏–Ω–æ! –ü—Ä–µ–∂–¥–µ —á–µ–º –Ω–∞—á–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–∞—à–∏–º –±–æ—Ç–æ–º, –ø–æ–¥–ø–∏—à–∏—Å—å: </b>' + '\n\n<a href="https://t.me/+bc9MOZxFDH0yNjEy">FilmClips</a>' + '\n\n<i>–ü–æ—Å–ª–µ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞–∂–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É‚úÖ"</i>',
    Markup.inlineKeyboard([
    [Markup.button.callback('–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É‚úÖ','podpiska')]
    ])
    )
    await ctx.replyWithAnimation({ source: fs.ReadStream('gifs/4d760df972f6fcbe080c3cc9a3095ed8_w200.gif') }, { caption: '<b>üé•–í–≤–µ–¥–∏ —Ç–æ–ª—å–∫–æ –∫–æ–¥ —Ñ–∏–ª—å–º–∞</b>', parse_mode: 'HTML'})
})
bot.hears('200', async (ctx) => {
    const checked2 = await checkMember(channelid, ctx.chat.id)
    if(!checked2) return ctx.reply("‚ùå–¢–´ –ù–ï –ü–û–î–ü–ò–°–ê–õ–°–Ø –ù–ê –ö–ê–ù–ê–õ‚ùå");
    ctx.replyWithPhoto({ source: fs.ReadStream("films/3lishniy.jpeg") }, { caption: "üé¨–ù–∞–∑–≤–∞–Ω–∏–µ: <b>–¢—Ä–µ—Ç–∏–π –ª–∏—à–Ω–∏–π</b>\nüó£Ô∏è–ñ–∞–Ω—Ä: <b>–ö–æ–º–µ–¥–∏—è</b>\nüó®Ô∏è–û—Ü–µ–Ω–∫–∞: <b>6.7/10</b>\nüí¢–í–æ–∑—Ä–∞—Å—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: <b>18+</b>", parse_mode: "HTML"});
})
bot.hears('201', async (ctx) => {
    const checked2 = await checkMember(channelid, ctx.chat.id)
    if(!checked2) return ctx.reply("‚ùå–¢–´ –ù–ï –ü–û–î–ü–ò–°–ê–õ–°–Ø –ù–ê –ö–ê–ù–ê–õ‚ùå");
    ctx.replyWithPhoto({ source: fs.ReadStream("films/millionsposobovpoteryatgolovu.jpg") }, { caption: "üé¨–ù–∞–∑–≤–∞–Ω–∏–µ: <b>–ú–∏–ª–ª–∏–æ–Ω —Å–ø–æ—Å–æ–±–æ–≤ –ø–æ—Ç–µ—Ä—è—Ç—å –≥–æ–ª–æ–≤—É</b>\nüó£Ô∏è–ñ–∞–Ω—Ä: <b>–ö–æ–º–µ–¥–∏—è</b>\nüó®Ô∏è–û—Ü–µ–Ω–∫–∞: <b>6.2/10</b>\nüí¢–í–æ–∑—Ä–∞—Å—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: <b>18+</b>", parse_mode: "HTML"});
})
bot.hears('202', async (ctx) => {
    const checked2 = await checkMember(channelid, ctx.chat.id)
    if(!checked2) return ctx.reply("‚ùå–¢–´ –ù–ï –ü–û–î–ü–ò–°–ê–õ–°–Ø –ù–ê –ö–ê–ù–ê–õ‚ùå");
    ctx.replyWithPhoto({ source: fs.ReadStream("films/glavniy_geroy.jpeg") }, { caption: "üé¨–ù–∞–∑–≤–∞–Ω–∏–µ: <b>–ì–ª–∞–≤–Ω—ã–π –≥–µ—Ä–æ–π</b>\nüó£Ô∏è–ñ–∞–Ω—Ä: <b>–ö–æ–º–µ–¥–∏—è/–ë–æ–µ–≤–∏–∫</b>\nüó®Ô∏è–û—Ü–µ–Ω–∫–∞: <b>7.4/10</b>\nüí¢–í–æ–∑—Ä–∞—Å—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: <b>16+</b>", parse_mode: "HTML"});
})
bot.hears('203', async (ctx) => {
    const checked2 = await checkMember(channelid, ctx.chat.id)
    if(!checked2) return ctx.reply("‚ùå–¢–´ –ù–ï –ü–û–î–ü–ò–°–ê–õ–°–Ø –ù–ê –ö–ê–ù–ê–õ‚ùå");
    ctx.replyWithPhoto({ source: fs.ReadStream("films/dnevnikbasketbol.jpeg") }, { caption: "üé¨–ù–∞–∑–≤–∞–Ω–∏–µ: <b>–î–Ω–µ–≤–Ω–∏–∫ –±–∞—Å–∫–µ—Ç–±–æ–ª–∏—Å—Ç–∞</b>\nüó£Ô∏è–ñ–∞–Ω—Ä: <b>–î—Ä–∞–º–∞/–ù–µ–∑–∞–≤–∏—Å–∏–º–æ–µ –∫–∏–Ω–æ</b>\nüó®Ô∏è–û—Ü–µ–Ω–∫–∞: <b>7.8/10</b>\nüí¢–í–æ–∑—Ä–∞—Å—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: <b>18+</b>", parse_mode: "HTML"});
})
bot.hears('204', async (ctx) => {
    const checked2 = await checkMember(channelid, ctx.chat.id)
    if(!checked2) return ctx.reply("‚ùå–¢–´ –ù–ï –ü–û–î–ü–ò–°–ê–õ–°–Ø –ù–ê –ö–ê–ù–ê–õ‚ùå");
    ctx.replyWithPhoto({ source: fs.ReadStream("films/brothers.jpeg") }, { caption: "üé¨–ù–∞–∑–≤–∞–Ω–∏–µ: <b>–ë—Ä–∞—Ç—å—è 2009</b>\nüó£Ô∏è–ñ–∞–Ω—Ä: <b>–í–æ–µ–Ω–Ω—ã–π/–î—Ä–∞–º–∞</b>\nüó®Ô∏è–û—Ü–µ–Ω–∫–∞: <b>7.4/10</b>\nüí¢–í–æ–∑—Ä–∞—Å—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: <b>16+</b>", parse_mode: "HTML"});
})
bot.hears('205', async (ctx) => {
    const checked2 = await checkMember(channelid, ctx.chat.id)
    if(!checked2) return ctx.reply("‚ùå–¢–´ –ù–ï –ü–û–î–ü–ò–°–ê–õ–°–Ø –ù–ê –ö–ê–ù–ê–õ‚ùå");
    ctx.replyWithPhoto({ source: fs.ReadStream("films/vpritik.jpeg") }, { caption: "üé¨–ù–∞–∑–≤–∞–Ω–∏–µ: <b>–í–ø—Ä–∏—Ç—ã–∫ 2010</b>\nüó£Ô∏è–ñ–∞–Ω—Ä: <b>–ö–æ–º–µ–¥–∏—è</b>\nüó®Ô∏è–û—Ü–µ–Ω–∫–∞: <b>7.2/10</b>\nüí¢–í–æ–∑—Ä–∞—Å—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: <b>16+</b>", parse_mode: "HTML"});
})
bot.hears('206', async (ctx) => {
    const checked2 = await checkMember(channelid, ctx.chat.id)
    if(!checked2) return ctx.reply("‚ùå–¢–´ –ù–ï –ü–û–î–ü–ò–°–ê–õ–°–Ø –ù–ê –ö–ê–ù–ê–õ‚ùå");
    ctx.replyWithPhoto({ source: fs.ReadStream("films/pochemuon.jpeg") }, { caption: "üé¨–ù–∞–∑–≤–∞–Ω–∏–µ: <b>–ü–æ—á–µ–º—É –æ–Ω</b>\nüó£Ô∏è–ñ–∞–Ω—Ä: <b>–ö–æ–º–µ–¥–∏—è/–†–æ–º–∞–Ω—Ç–∏–∫–∞</b>\nüó®Ô∏è–û—Ü–µ–Ω–∫–∞: <b>6.6/10</b>\nüí¢–í–æ–∑—Ä–∞—Å—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: <b>18+</b>", parse_mode: "HTML"});
})
bot.hears('207', async (ctx) => {
    const checked2 = await checkMember(channelid, ctx.chat.id)
    if(!checked2) return ctx.reply("‚ùå–¢–´ –ù–ï –ü–û–î–ü–ò–°–ê–õ–°–Ø –ù–ê –ö–ê–ù–ê–õ‚ùå");
    ctx.replyWithPhoto({ source: fs.ReadStream("films/prizrak6.jpeg") }, { caption: "üé¨–ù–∞–∑–≤–∞–Ω–∏–µ: <b>–ü—Ä–∏–∑—Ä–∞—á–Ω–∞—è —à–µ—Å—Ç—ë—Ä–∫–∞</b>\nüó£Ô∏è–ñ–∞–Ω—Ä: <b>–ë–æ–µ–≤–∏–∫</b>\nüó®Ô∏è–û—Ü–µ–Ω–∫–∞: <b>6.1/10</b>\nüí¢–í–æ–∑—Ä–∞—Å—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: <b>18+</b>", parse_mode: "HTML"});
})
bot.hears('208', async (ctx) => {
    const checked2 = await checkMember(channelid, ctx.chat.id)
    if(!checked2) return ctx.reply("‚ùå–¢–´ –ù–ï –ü–û–î–ü–ò–°–ê–õ–°–Ø –ù–ê –ö–ê–ù–ê–õ‚ùå");
    ctx.replyWithPhoto({ source: fs.ReadStream("films/Legend_2015.jpg") }, { caption: "üé¨–ù–∞–∑–≤–∞–Ω–∏–µ: <b>–õ–µ–≥–µ–Ω–¥–∞ 2015</b>\nüó£Ô∏è–ñ–∞–Ω—Ä: <b>–ö—Ä–∏–º–∏–Ω–∞–ª—å–Ω–∞—è –¥—Ä–∞–º–∞</b>\nüó®Ô∏è–û—Ü–µ–Ω–∫–∞: <b>7.2/10</b>\nüí¢–í–æ–∑—Ä–∞—Å—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: <b>18+</b>", parse_mode: "HTML"});
})
bot.hears('209', async (ctx) => {
    const checked2 = await checkMember(channelid, ctx.chat.id)
    if(!checked2) return ctx.reply("‚ùå–¢–´ –ù–ï –ü–û–î–ü–ò–°–ê–õ–°–Ø –ù–ê –ö–ê–ù–ê–õ‚ùå");
    ctx.replyWithPhoto({ source: fs.ReadStream("films/vechnost.jpeg") }, { caption: "üé¨–ù–∞–∑–≤–∞–Ω–∏–µ: <b>–í–µ—á–Ω–æ—Å—Ç—å 2015</b>\nüó£Ô∏è–ñ–∞–Ω—Ä: <b>–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞/–î—Ä–∞–º–∞/–ö—Ä–∏–º–∏–Ω–∞–ª</b>\nüó®Ô∏è–û—Ü–µ–Ω–∫–∞: <b>8.2/10</b>\nüí¢–í–æ–∑—Ä–∞—Å—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: <b>16+</b>", parse_mode: "HTML"});
})
bot.hears('210', async (ctx) => {
    const checked2 = await checkMember(channelid, ctx.chat.id)
    if(!checked2) return ctx.reply("‚ùå–¢–´ –ù–ï –ü–û–î–ü–ò–°–ê–õ–°–Ø –ù–ê –ö–ê–ù–ê–õ‚ùå");
    ctx.replyWithPhoto({ source: fs.ReadStream("films/pikseli.jpg") }, { caption: "üé¨–ù–∞–∑–≤–∞–Ω–∏–µ: <b>–ü–∏–∫—Å–µ–ª–∏</b>\nüó£Ô∏è–ñ–∞–Ω—Ä: <b>–ö–æ–º–µ–¥–∏—è/–ë–æ–µ–≤–∏–∫/–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞</b>\nüó®Ô∏è–û—Ü–µ–Ω–∫–∞: <b>5.9/10</b>\nüí¢–í–æ–∑—Ä–∞—Å—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: <b>12+</b>", parse_mode: "HTML"});
})
bot.hears('211', async (ctx) => {
    const checked2 = await checkMember(channelid, ctx.chat.id)
    if(!checked2) return ctx.reply("‚ùå–¢–´ –ù–ï –ü–û–î–ü–ò–°–ê–õ–°–Ø –ù–ê –ö–ê–ù–ê–õ‚ùå");
    ctx.replyWithPhoto({ source: fs.ReadStream("films/tachki.png") }, { caption: "üé¨–ù–∞–∑–≤–∞–Ω–∏–µ: <b>–¢–∞—á–∫–∏</b>\nüó£Ô∏è–ñ–∞–Ω—Ä: <b>–î–µ—Ç—Å–∫–∏–π/–ö–æ–º–µ–¥–∏—è</b>\nüó®Ô∏è–û—Ü–µ–Ω–∫–∞: <b>7.5/10</b>\nüí¢–í–æ–∑—Ä–∞—Å—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: <b>6+</b>", parse_mode: "HTML"});
})
bot.hears('212', async (ctx) => {
    const checked2 = await checkMember(channelid, ctx.chat.id)
    if(!checked2) return ctx.reply("‚ùå–¢–´ –ù–ï –ü–û–î–ü–ò–°–ê–õ–°–Ø –ù–ê –ö–ê–ù–ê–õ‚ùå");
    ctx.replyWithPhoto({ source: fs.ReadStream("films/tachki2.png") }, { caption: "üé¨–ù–∞–∑–≤–∞–Ω–∏–µ: <b>–¢–∞—á–∫–∏ 2</b>\nüó£Ô∏è–ñ–∞–Ω—Ä: <b>–î–µ—Ç—Å–∫–∏–π/–ö–æ–º–µ–¥–∏—è</b>\nüó®Ô∏è–û—Ü–µ–Ω–∫–∞: <b>6.8/10</b>\nüí¢–í–æ–∑—Ä–∞—Å—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: <b>6+</b>", parse_mode: "HTML"});
})
bot.hears('213', async (ctx) => {
    const checked2 = await checkMember(channelid, ctx.chat.id)
    if(!checked2) return ctx.reply("‚ùå–¢–´ –ù–ï –ü–û–î–ü–ò–°–ê–õ–°–Ø –ù–ê –ö–ê–ù–ê–õ‚ùå");
    ctx.replyWithPhoto({ source: fs.ReadStream("films/tachki3.png") }, { caption: "üé¨–ù–∞–∑–≤–∞–Ω–∏–µ: <b>–¢–∞—á–∫–∏ 3</b>\nüó£Ô∏è–ñ–∞–Ω—Ä: <b>–î–µ—Ç—Å–∫–∏–π/–ö–æ–º–µ–¥–∏—è</b>\nüó®Ô∏è–û—Ü–µ–Ω–∫–∞: <b>7.3/10</b>\nüí¢–í–æ–∑—Ä–∞—Å—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: <b>6+</b>", parse_mode: "HTML"});
})
bot.hears('214', async (ctx) => {
    const checked2 = await checkMember(channelid, ctx.chat.id)
    if(!checked2) return ctx.reply("‚ùå–¢–´ –ù–ï –ü–û–î–ü–ò–°–ê–õ–°–Ø –ù–ê –ö–ê–ù–ê–õ‚ùå");
    ctx.replyWithPhoto({ source: fs.ReadStream("films/t-34.jpg") }, { caption: "üé¨–ù–∞–∑–≤–∞–Ω–∏–µ: <b>–¢-34</b>\nüó£Ô∏è–ñ–∞–Ω—Ä: <b>–í–æ–µ–Ω–Ω—ã–π/–ë–æ–µ–≤–∏–∫</b>\nüó®Ô∏è–û—Ü–µ–Ω–∫–∞: <b>6.6/10</b>\nüí¢–í–æ–∑—Ä–∞—Å—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: <b>12+</b>", parse_mode: "HTML"});
})
bot.hears('215', async (ctx) => {
    const checked2 = await checkMember(channelid, ctx.chat.id)
    if(!checked2) return ctx.reply("‚ùå–¢–´ –ù–ï –ü–û–î–ü–ò–°–ê–õ–°–Ø –ù–ê –ö–ê–ù–ê–õ‚ùå");
    ctx.replyWithPhoto({ source: fs.ReadStream("films/volkstreet.png") }, { caption: "üé¨–ù–∞–∑–≤–∞–Ω–∏–µ: <b>–í–æ–ª–∫ —Å –£–æ–ª–ª-—Å—Ç—Ä–∏—Ç</b>\nüó£Ô∏è–ñ–∞–Ω—Ä: <b>–ö–æ–º–µ–¥–∏—è</b>\nüó®Ô∏è–û—Ü–µ–Ω–∫–∞: <b>7.9/10</b>\nüí¢–í–æ–∑—Ä–∞—Å—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: <b>18+</b>", parse_mode: "HTML"});
})
bot.hears('216', async (ctx) => {
    const checked2 = await checkMember(channelid, ctx.chat.id)
    if(!checked2) return ctx.reply("‚ùå–¢–´ –ù–ï –ü–û–î–ü–ò–°–ê–õ–°–Ø –ù–ê –ö–ê–ù–ê–õ‚ùå");
    ctx.replyWithPhoto({ source: fs.ReadStream("films/boyskaut.png") }, { caption: "üé¨–ù–∞–∑–≤–∞–Ω–∏–µ: <b>–ü–æ—Å–ª–µ–¥–Ω–∏–π –±–æ–π—Å–∫–∞—É—Ç</b>\nüó£Ô∏è–ñ–∞–Ω—Ä: <b>–ë–æ–µ–≤–∏–∫/–ö–æ–º–µ–¥–∏—è</b>\nüó®Ô∏è–û—Ü–µ–Ω–∫–∞: <b>7.7/10</b>\nüí¢–í–æ–∑—Ä–∞—Å—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: <b>18+</b>", parse_mode: "HTML"});
})
bot.hears('217', async (ctx) => {
    const checked2 = await checkMember(channelid, ctx.chat.id)
    if(!checked2) return ctx.reply("‚ùå–¢–´ –ù–ï –ü–û–î–ü–ò–°–ê–õ–°–Ø –ù–ê –ö–ê–ù–ê–õ‚ùå");
    ctx.replyWithPhoto({ source: fs.ReadStream("films/focus.jpeg") }, { caption: "üé¨–ù–∞–∑–≤–∞–Ω–∏–µ: <b>–§–æ–∫—É—Å</b>\nüó£Ô∏è–ñ–∞–Ω—Ä: <b>–†–æ–º–∞–Ω—Ç–∏–∫–∞/–ö—Ä–∏–º–∏–Ω–∞–ª</b>\nüó®Ô∏è–û—Ü–µ–Ω–∫–∞: <b>7.6/10</b>\nüí¢–í–æ–∑—Ä–∞—Å—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: <b>18+</b>", parse_mode: "HTML"});
})
bot.hears('218', async (ctx) => {
    const checked2 = await checkMember(channelid, ctx.chat.id)
    if(!checked2) return ctx.reply("‚ùå–¢–´ –ù–ï –ü–û–î–ü–ò–°–ê–õ–°–Ø –ù–ê –ö–ê–ù–ê–õ‚ùå");
    ctx.replyWithPhoto({ source: fs.ReadStream("films/malibu.jpg") }, { caption: "üé¨–ù–∞–∑–≤–∞–Ω–∏–µ: <b>–°–ø–∞—Å–∞—Ç–µ–ª—å –ú–∞–ª–∏–±—É</b>\nüó£Ô∏è–ñ–∞–Ω—Ä: <b>–ö–æ–º–µ–¥–∏—è/–ë–æ–µ–≤–∏–∫</b>\nüó®Ô∏è–û—Ü–µ–Ω–∫–∞: <b>8.1/10</b>\nüí¢–í–æ–∑—Ä–∞—Å—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: <b>18+</b>", parse_mode: "HTML"});
})
bot.hears('/adminpanel', async (ctx) => {
    if(ctx.from.id == adminid) {
    ctx.reply('–¢–≤–æ—è –ª–∏—á–Ω–∞—è –ø–∞–Ω–µ–ª—å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:', {
        reply_markup: {
        inline_keyboard: [
            [
                {text: '–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —é–∑–µ—Ä–æ–≤', callback_data: 'stata'},
                {text: '–î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å–º', callback_data: 'filmadd'}
            ]
        ]
        }
    })
   }})
bot.action('stata', async (ctx) => {
   let users = await get(child(ref(db), "users")).then(users => {
    users = users.val();
    ctx.answerCbQuery('üåê–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: ' + Object.keys(users).length);
    })
})
bot.action('filmadd', async (ctx) => ctx.scene.enter('addFilmScene'))
bot.hears('300', (ctx) => { 
    try {ctx.replyWithPhoto({url: urll}, {caption: 'üé¨–ù–∞–∑–≤–∞–Ω–∏–µ: <b>' + film + '</b>' + '\nüó£Ô∏è–ñ–∞–Ω—Ä: <b>' + zanr + '</b>' + '\nüó®Ô∏è–û—Ü–µ–Ω–∫–∞: <b>' + rait + '</b>' + '\nüí¢–í–æ–∑—Ä–∞—Å—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: <b>' + ogran + '</b>', parse_mode: 'HTML'}) }
    catch {
    }
})
console.log('–ó–∞–ø—É—Å—Ç–∏–ª –±–æ—Ç–∞')
bot.launch()